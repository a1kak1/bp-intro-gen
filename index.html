<!DOCTYPE html>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'">

<title>BP Intro Gen</title>

<link rel="icon" type="image/png" href="./favicon.png" />

<style>
  :root {
    --ratio: 0.6;
    --width: calc(1050px * var(--ratio));
    --height: calc(1485px * var(--ratio));
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    border: 0;
    outline: 0;
  }

  body {
    width: 100vw;
    height: 100vh;
  }

  #gen {
    width: var(--width);
    height: var(--height);
  }

  #result {
    margin-left: 40px;
    width: var(--width);
    height: var(--height);
  }
</style>

<svg id="gen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1050 1485" style="visibility: hidden;">
  <style id="gen-style">/* 'gen.css' is embeded here. */</style>

  <foreignObject id="gen-body" xmlns="http://www.w3.org/1999/xhtml">
    <img id="template-base" draggable="false" />
    <div class="avatar-template">
      <div class="user-avatar" tabindex="0">
        <img class="avatar-image" draggable="false" />
      </div>
      <div class="user-avatar-info">
        <div class="scale"></div>
        <div class="filter"></div>
      </div>
    </div>
    <div class="input-template name">
      <input class="user-input name" type="text" />
    </div>
    <div class="input-template id">
      <input class="user-input id" type="text" />
    </div>
    <div class="input-template twitter">
      <input class="user-input twitter" type="text" />
    </div>
    <div class="input-template discord">
      <input class="user-input discord" type="text" />
    </div>
    <div class="class">
      <div class="checkbox-template af">
        <div class="user-checkbox of-class" data-tag="af" tabindex="0"></div>
      </div>
      <div class="input-template af-level">
        <input class="user-input of-class af-level" data-tag="af" type="text" />
      </div>
      <div class="checkbox-template ts">
        <div class="user-checkbox of-class" data-tag="ts" tabindex="0"></div>
      </div>
      <div class="input-template ts-level">
        <input class="user-input of-class ts-level" data-tag="ts" type="text" />
      </div>
      <div class="checkbox-template ba">
        <div class="user-checkbox of-class" data-tag="ba" tabindex="0"></div>
      </div>
      <div class="input-template ba-level">
        <input class="user-input of-class ba-level" data-tag="ba" type="text" />
      </div>
      <div class="checkbox-template sc">
        <div class="user-checkbox of-class" data-tag="sc" tabindex="0"></div>
      </div>
      <div class="input-template sc-level">
        <input class="user-input of-class sc-level" data-tag="sc" type="text" />
      </div>
    </div>
    <div class="input-template rank">
      <input class="user-input rank" type="text" />
    </div>
    <div class="tests">
      <div class="checkbox-template cat">
        <div class="user-checkbox of-tests" data-tag="cat" tabindex="0"></div>
      </div>
      <div class="checkbox-template cbt">
        <div class="user-checkbox of-tests" data-tag="cbt" tabindex="0"></div>
      </div>
    </div>
    <div class="playing-styles">
      <div class="slider-template casual-to-hardcore">
        <div class="user-slider" data-group="casual-to-hardcore" tabindex="0">
          <div class="user-slider-scale" data-group="casual-to-hardcore" data-value="0" data-offset="2px"></div>
          <div class="user-slider-scale" data-group="casual-to-hardcore" data-value="1" data-offset="71px"></div>
          <div class="user-slider-scale" data-group="casual-to-hardcore" data-value="2" data-offset="131px"></div>
          <div class="user-slider-scale" data-group="casual-to-hardcore" data-value="3" data-offset="193px"></div>
          <div class="user-slider-scale" data-group="casual-to-hardcore" data-value="4" data-offset="255px"></div>
          <div class="user-slider-scale" data-group="casual-to-hardcore" data-value="5" data-offset="315px"></div>
          <div class="user-slider-scale" data-group="casual-to-hardcore" data-value="6" data-offset="384px"></div>
        </div>
        <div class="slider-appearance" data-group="casual-to-hardcore" data-basic-width="48px"></div>
      </div>
      <div class="slider-template long-range-to-close-range">
        <div class="user-slider" data-group="long-range-to-close-range" tabindex="0">
          <div class="user-slider-scale" data-group="long-range-to-close-range" data-value="0" data-offset="2px"></div>
          <div class="user-slider-scale" data-group="long-range-to-close-range" data-value="1" data-offset="71px"></div>
          <div class="user-slider-scale" data-group="long-range-to-close-range" data-value="2" data-offset="131px"></div>
          <div class="user-slider-scale" data-group="long-range-to-close-range" data-value="3" data-offset="193px"></div>
          <div class="user-slider-scale" data-group="long-range-to-close-range" data-value="4" data-offset="255px"></div>
          <div class="user-slider-scale" data-group="long-range-to-close-range" data-value="5" data-offset="315px"></div>
          <div class="user-slider-scale" data-group="long-range-to-close-range" data-value="6" data-offset="384px"></div>
        </div>
        <div class="slider-appearance" data-group="long-range-to-close-range" data-basic-width="48px"></div>
      </div>
      <div class="textarea-template playing-style-comment">
        <textarea class="user-textarea playing-style-comment"></textarea>
      </div>
    </div>
    <div class="playing-hours">
      <div class="input-template weekdays">
        <input class="user-input weekdays" type="text" />
      </div>
      <div class="input-template holidays">
        <input class="user-input holidays" type="text" />
      </div>
    </div>
    <div class="voice-chat">
      <div class="radiobutton-template ok">
        <div class="user-radiobutton of-voice-chat" data-group="voice-chat" data-tag="ok" tabindex="0"></div>
      </div>
      <div class="radiobutton-template mic-off">
        <div class="user-radiobutton of-voice-chat" data-group="voice-chat" data-tag="mic-off" tabindex="0"></div>
      </div>
      <div class="radiobutton-template ng">
        <div class="user-radiobutton of-voice-chat" data-group="voice-chat" data-tag="ng" tabindex="0"></div>
      </div>
    </div>
    <div class="guild-activity">
      <div class="radiobutton-template solo">
        <div class="user-radiobutton of-guild-activity" data-group="guild-activity" data-tag="solo" tabindex="0"></div>
      </div>
      <div class="radiobutton-template join">
        <div class="user-radiobutton of-guild-activity" data-group="guild-activity" data-tag="join" tabindex="0"></div>
      </div>
      <div class="radiobutton-template establish">
        <div class="user-radiobutton of-guild-activity" data-group="guild-activity" data-tag="establish" tabindex="0"></div>
      </div>
      <div class="radiobutton-template with-friends">
        <div class="user-radiobutton of-guild-activity" data-group="guild-activity" data-tag="with-friends" tabindex="0"></div>
      </div>
      <div class="radiobutton-template undecided">
        <div class="user-radiobutton of-guild-activity" data-group="guild-activity" data-tag="undecided" tabindex="0"></div>
      </div>
      <div class="input-template guild-name">
        <input class="user-input guild-name" type="text" />
      </div>
    </div>
    <div class="online-game-experiences">
      <div class="input-template years">
        <input class="user-input years" type="text" />
      </div>
      <div class="textarea-template play-title">
        <textarea class="user-textarea play-title"></textarea>
      </div>
    </div>
    <div class="textarea-template free-comment">
      <textarea class="user-textarea free-comment"></textarea>
    </div>
  </foreignObject>

  <g>
    <symbol id="check" viewBox="0 0 21.03 20.31">
      <path d="M20.56,0,21,.81A41.08,41.08,0,0,0,12.55,9a35.32,35.32,0,0,0-5.64,9.7l-.69.46a11.94,11.94,0,0,0-1.53,1.15,13,13,0,0,0-.61-1.81l-.36-.89a22.1,22.1,0,0,0-2-4A2.48,2.48,0,0,0,0,12.33a3.58,3.58,0,0,1,2.2-1.16q1.3,0,2.85,3.49l.56,1.25a45.83,45.83,0,0,1,6.68-9.13A38.73,38.73,0,0,1,20.56,0Z" />
    </symbol>
    <use class="checkbox-appearance of-class" xlink:href="#check" x="459" y="502" width="21.03" height="20.31" data-tag="af" />
    <use class="checkbox-appearance of-class" xlink:href="#check" x="578" y="504" width="21.03" height="20.31" data-tag="ts" />
    <use class="checkbox-appearance of-class" xlink:href="#check" x="697" y="504" width="21.03" height="20.31" data-tag="ba" />
    <use class="checkbox-appearance of-class" xlink:href="#check" x="816" y="504" width="21.03" height="20.31" data-tag="sc" />
    <use class="checkbox-appearance of-tests" xlink:href="#check" x="913" y="516" width="21.03" height="20.31" data-tag="cat" />
    <use class="checkbox-appearance of-tests" xlink:href="#check" x="913" y="541" width="21.03" height="20.31" data-tag="cbt" />
    <use class="radiobutton-appearance" xlink:href="#check" x="836" y="824" width="21.03" height="20.31" data-tag="ok" />
    <use class="radiobutton-appearance" xlink:href="#check" x="836" y="856" width="21.03" height="20.31" data-tag="mic-off" />
    <use class="radiobutton-appearance" xlink:href="#check" x="836" y="889" width="21.03" height="20.31" data-tag="ng" />
    <use class="radiobutton-appearance" xlink:href="#check" x="184" y="1037" width="21.03" height="20.31" data-tag="solo" />
    <use class="radiobutton-appearance" xlink:href="#check" x="184" y="1070" width="21.03" height="20.31" data-tag="join" />
    <use class="radiobutton-appearance" xlink:href="#check" x="184" y="1103" width="21.03" height="20.31" data-tag="establish" />
    <use class="radiobutton-appearance" xlink:href="#check" x="363" y="1037" width="21.03" height="20.31" data-tag="with-friends" />
    <use class="radiobutton-appearance" xlink:href="#check" x="363" y="1070" width="21.03" height="20.31" data-tag="undecided" />
  </g>
</svg>

<img id="result" />

<script type="module">
  import * as Generator from './gen.js';

  const gen = document.getElementById('gen');
  const result = document.getElementById('result');

  Generator.fetchExternalResource('./gen.css', false, data => {
    document.getElementById('gen-style').innerHTML = data;
    gen.style.setProperty('visibility', 'visible');
  });
  Generator.fetchExternalResource('./bp_introduction.png', true, url => {
    document.getElementById('template-base').src = url;
  });

  Generator.onImageGenerated(url => result.src = url);
  Generator.enableImageGeneration(gen);
  Generator.enableUserAvatar('.user-avatar', '.avatar-image', '.user-avatar-info .scale', '.user-avatar-info .filter');
  Generator.enableUserInput('.user-input');
  Generator.enableUserTextarea('.user-textarea');
  Generator.enableUserCheckboxBoundToInput('.user-checkbox.of-class', '.checkbox-appearance.of-class', '.user-input.of-class');
  Generator.enableUserCheckbox('.user-checkbox.of-tests', '.checkbox-appearance.of-tests');
  Generator.enableUserRadiobutton('.user-radiobutton', '.radiobutton-appearance');
  Generator.enableUserSlider('.user-slider', '.user-slider-scale', '.slider-appearance');
</script>
